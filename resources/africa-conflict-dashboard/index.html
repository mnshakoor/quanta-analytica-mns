
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Africa Conflict Zone Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
        header { background-color: #2c3e50; color: white; padding: 10px; text-align: center; }
        .dashboard { display: flex; flex-wrap: wrap; padding: 10px; }
        .card { flex: 1 1 200px; margin: 10px; padding: 10px; background-color: #ecf0f1; border-radius: 5px; text-align: center; }
        #map { height: 400px; width: 100%; margin: 10px 0; }
        canvas { margin: 10px auto; display: block; max-width: 600px; }
    </style>
</head>
<body>
    <header>
        <h1>Africa Conflict Zone Dashboard</h1>
    </header>
    <div class="dashboard">
        <div class="card" id="riskScoreCard">Instability Risk Score: Loading...</div>
        <div class="card" id="alertZoneCard">Custom Alert Zones: Loading...</div>
    </div>
    <div id="map"></div>
    <canvas id="incidentChart"></canvas>
    <canvas id="missionChart"></canvas>

    <script>
        // Load JSON data
        async function loadData() {
            const conflictZones = await fetch('conflict_zones.json').then(res => res.json());
            const weeklyIncidents = await fetch('weekly_incident_tracker.json').then(res => res.json());
            const peacekeepingMissions = await fetch('peacekeeping_missions.json').then(res => res.json());
            const instabilityScores = await fetch('instability_risk_scores.json').then(res => res.json());
            const alertZones = await fetch('custom_alert_zones.json').then(res => res.json());

            // Scorecards
            const avgRiskScore = instabilityScores.reduce((sum, item) => sum + item.Score, 0) / instabilityScores.length;
            document.getElementById('riskScoreCard').innerText = `Instability Risk Score: ${avgRiskScore.toFixed(2)}`;

            document.getElementById('alertZoneCard').innerText = `Custom Alert Zones: ${alertZones.length}`;

            // Leaflet Map
            const map = L.map('map').setView([0, 20], 3);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: 'Â© OpenStreetMap contributors'
            }).addTo(map);

            conflictZones.forEach(zone => {
                if (zone.Latitude && zone.Longitude) {
                    L.marker([zone.Latitude, zone.Longitude])
                        .addTo(map)
                        .bindPopup(`<strong>${zone.Country}</strong><br>${zone.ConflictType}`);
                }
            });

            // Weekly Incident Chart
            const incidentData = {};
            weeklyIncidents.forEach(item => {
                const key = item.Country;
                incidentData[key] = (incidentData[key] || 0) + 1;
            });

            const incidentChart = new Chart(document.getElementById('incidentChart'), {
                type: 'bar',
                data: {
                    labels: Object.keys(incidentData),
                    datasets: [{
                        label: 'Weekly Incidents',
                        data: Object.values(incidentData),
                        backgroundColor: 'rgba(231, 76, 60, 0.6)'
                    }]
                }
            });

            // Peacekeeping Mission Chart
            const missionData = {};
            peacekeepingMissions.forEach(m => {
                missionData[m.MissionType] = (missionData[m.MissionType] || 0) + 1;
            });

            const missionChart = new Chart(document.getElementById('missionChart'), {
                type: 'pie',
                data: {
                    labels: Object.keys(missionData),
                    datasets: [{
                        label: 'Peacekeeping Missions',
                        data: Object.values(missionData),
                        backgroundColor: ['#3498db', '#2ecc71', '#f1c40f', '#e67e22']
                    }]
                }
            });
        }

        loadData();
    </script>

<script>
const regionMap = {
    "West Africa": ["Nigeria", "Ghana", "Benin", "Burkina Faso", "Mali", "Niger", "Senegal", "Togo"],
    "East Africa": ["Kenya", "Ethiopia", "Somalia", "Uganda", "Tanzania", "Rwanda", "Burundi"],
    "Central Africa": ["DR Congo", "CAR", "Cameroon", "Chad", "Gabon", "Equatorial Guinea"],
    "Southern Africa": ["South Africa", "Zimbabwe", "Zambia", "Mozambique", "Angola", "Namibia", "Botswana"],
    "North Africa": ["Egypt", "Libya", "Tunisia", "Algeria", "Morocco", "Sudan"]
};

function filterByRegion(region) {
    const countries = regionMap[region];
    // Filter map markers and charts based on selected region
    updateMapMarkers(countries);
    updateCharts(countries);
}

function updateMapMarkers(countries) {
    // Example logic to filter map markers
    markers.forEach(marker => {
        if (countries.includes(marker.country)) {
            marker.addTo(map);
        } else {
            map.removeLayer(marker);
        }
    });
}

function updateCharts(countries) {
    // Example logic to filter chart data
    // You can implement filtering logic for bar and pie charts here
}
</script>

<div>
    <label for="regionSelect">Filter by Region:</label>
    <select id="regionSelect" onchange="filterByRegion(this.value)">
        <option value="">-- Select Region --</option>
        <option value="West Africa">West Africa</option>
        <option value="East Africa">East Africa</option>
        <option value="Central Africa">Central Africa</option>
        <option value="Southern Africa">Southern Africa</option>
        <option value="North Africa">North Africa</option>
    </select>
</div>

<script>
function showAlerts(conflictData) {
    const alertContainer = document.getElementById("alertContainer");
    alertContainer.innerHTML = "";
    conflictData.forEach(zone => {
        if (zone.instability_score >= 70 || zone.active_conflict === true) {
            const alert = document.createElement("div");
            alert.className = "alert";
            alert.innerHTML = `<strong>ALERT:</strong> ${zone.country} - ${zone.conflict_type} (${zone.instability_score})`;
            alertContainer.appendChild(alert);
        }
    });
}
</script>

<div id="alertContainer" style="margin-top:20px;"></div>

</body>
</html>
